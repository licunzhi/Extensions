"use strict";var AjaxXhr;chrome.browserAction.onClicked.addListener(function(e){window.open("https://apizza.net/?f=chromeapp")});var AjaxHeader=[],AjaxURL="",ApiID="";chrome.runtime.onMessage.addListener(function(a,t,e){if(ApiID=a.apiID,"stop"!==a){var r,s={},n={async:!0,crossDomain:!0,method:a.method.toUpperCase(),url:a.url,timeout:0};if(AjaxHeader=a.headers,AjaxURL=a.url,null!=a.contentType&&(n.contentType=a.contentType),null!=a.processData&&(n.processData=a.processData),null!=a.headers&&(n.headers=a.headers),null!=a.data&&a.isPost)if("form-data"===a.bodyType){for(var d=new FormData,o=0;o<a.data.length;o++){var u=a.data[o],l=u.key,i=u.value;if("FILE"===u.rtype){var p=u.filename?u.filename:"undefined";i=dataURLtoBlob(i),d.append(l,i,p)}else d.append(l,i)}n.data=d}else if("x-www-form-urlencoded"===a.bodyType){var c={};for(o=0;o<a.data.length;o++)l=a.data[o].key,i=a.data[o].value,c[l]=i;n.data=c}else n.data=a.data;n.beforeSend=function(){r=(new Date).getTime(),chrome.webRequest.onBeforeSendHeaders.addListener(getHeaders,{urls:[a.url+"/*"]},["requestHeaders","blocking"])},n.complete=function(e){s.readyState=e.readyState,s.status=e.status,s.headers=e.getAllResponseHeaders(),s.headerStatus=e.status+" "+e.statusText,s.contentType=e.getResponseHeader("Content-Type"),s.responseText=e.responseText,s.statusText=e.statusText,s.runtime=(new Date).getTime()-r,s.apiID=ApiID,s.flowApiId=a.id,s.url=a.url,chrome.tabs.sendMessage(t.tab.id,s),chrome.webRequest.onBeforeSendHeaders.removeListener(getHeaders,{urls:[a.url+"/*"]},["requestHeaders","blocking"]),AjaxXhr=null},AjaxXhr=$.ajax(n)}else void 0===AjaxXhr||null==AjaxXhr||(AjaxXhr.abort(),AjaxXhr=null)});var getHeaders=function(e){for(var a=[],t=0;t<e.requestHeaders.length;t++){var r=e.requestHeaders[t];["Origin","User-Agent","Accept-Language"].includes(r.name)||a.push(r)}return{requestHeaders:a}};
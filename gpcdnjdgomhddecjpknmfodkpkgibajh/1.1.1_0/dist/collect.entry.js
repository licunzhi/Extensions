/*! Copyright banther@pm.me */!function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=119)}({119:function(t,e,n){"use strict";var i,r=n(13)()();chrome.storage.sync.get({minWidthValue:400,minHeightValue:200,email:null,token:null,userId:null},function(t){if(!document.getElementById("yotukuImageList")){var e=t.minWidthValue,o=t.minHeightValue,s=(t.email,t.userId,t.token,document.title),a=n(120)(),l=n(121)(e,o);l=r.functions.fUnique(l);var c=n(126),u=document.createElement("div");u.id="yotukuImageList",u.style.zIndex=129999,u.innerHTML=c,document.body.appendChild(u),$("body").css("overflowY","hidden"),$("html").css("overflowY","hidden");var f=new Vue({el:"#yotukuImageList",data:{imgs:l,errorMessage:"",storage:"private",pageTitle:s,nosync:a,zipedImgCount:0},computed:{selectedCount:function(){var t=0;for(let e=0;e<this.imgs.length;e++)this.imgs[e].selected&&(t+=1);return t}},watch:{zipedImgCount:function(t,e){var n=this;t==n.selectedCount&&i.generateAsync({type:"blob"}).then(function(t){saveAs(t,s+".zip"),n.zipedImgCount=0},function(t){console.log(t)})}},mounted:function(){},created:function(){!function(){var t=document.createElement("script");t.src="https://pingjs.qq.com/h5/stats.js?v2.0.2",t.setAttribute("name","MTAH5"),t.setAttribute("sid","500646460");var e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(t,e)}()},methods:{joinvip:function(){chrome.runtime.sendMessage({cmd:"openNewLink",msg:"app/option/index.html"})},close:function(){$("#yotukuImageList").remove(),$("body").css("overflowY","auto"),$("html").css("overflowY","auto")},pad:function(t,e){for(var n=t.toString().length;n<e;)t="0"+t,n++;return t},smartSync2:function(){for(var t,e=this.imgs,n=[],i=0;i<e.length;i++)n.length>0?e[i].height>=n[n.length-1].height&&n.push(e[i]):n.push(e[i]);t=r.functions.fLf(n[0].src);var o=[];for(i=0;i<e.length;i++)t==r.functions.fLf(e[i].src)&&o.push(e[i]);var s=[];if(o.length>0){if(o.length>=1){let t=0,e=9999,n=4;var a=o[0],l=a.src.substr(a.src.lastIndexOf("/")+1),c=(l=l.split("."))[0];for(c=c.substr(0,c.length-n);t<=e;t++){let e=a.src.substr(0,a.src.lastIndexOf("/")+1);e=e+c+this.pad(t,n)+"."+l[1],r.functions.fCheckImg(e)&&s.push({src:e})}}this.imgs=s}},smartSync:function(){let t=[];for(var e,n=this.imgs,i=[],o=0;o<n.length;o++)i.length>0?n[o].height>=i[i.length-1].height&&i.push(n[o]):i.push(n[o]);e=r.functions.fUrlHelper(i[0].src);let s=r.oData.localurl;var a=s.substr(0,s.lastIndexOf("/")+1),l=0,c=s.substr(s.lastIndexOf("/")+1).split("."),u=c[0],f="";u.split("_").length>0&&(u=u.split("_")[0]);var d=!1;for(l=0;l<100&&!d;l++)setTimeout(()=>{},1e3),f=0==l?a+u+"."+c[1]:a+u+"_"+l+"."+c[1],$.ajax({method:"GET",url:f,success:function(n,i,o){var s=new RegExp(e.start+"[0-9a-zA-Z-_]+."+e.ext,"gi"),a=n.match(s);if(a)for(let e=0;e<a.length;e++){let n=r.functions.fUrlHelper(a[e]);t.push({src:a[e],selected:!0,name:n.filename})}},error:function(t,e,n){404==t.status&&(l=101,d=!0)}});var h=!1;if(0==t.length)for(l=0;l<100&&!h;l++)setTimeout(()=>{},1e3),f=void 0===c[1]?a+l:a+l+"."+c[1],$.ajax({method:"GET",url:f,success:function(n){var i=new RegExp(e.start+"[0-9a-zA-Z-_]+."+e.ext,"gi"),o=n.match(i);if(o)for(let e=0;e<o.length;e++){let n=r.functions.fUrlHelper(o[e]);t.push({src:o[e],selected:!0,name:n.filename})}},error:function(t,e,n){404==t.status&&(h=!0,l=101)}});var g=!1;if(0==t.length)for(l=0;l<100&&!g;l++)setTimeout(()=>{},1e3),f=void 0===c[1]?a+u+"/"+l:a+u+"/"+l+"."+c[1],$.ajax({method:"GET",url:f,success:function(n){var i=new RegExp(e.start+"[0-9a-zA-Z-_]+."+e.ext,"gi"),o=n.match(i);if(o)for(let e=0;e<o.length;e++){let n=r.functions.fUrlHelper(o[e]);t.push({src:o[e],selected:!0,name:n.filename})}},error:function(t,e,n){404==t.status&&(g=!0,l=101)}});this.imgs=t,this.masonry(),this.lightGallery()},downloadZip:function(){var t=this;i=new JSZip;for(let n=0;n<this.imgs.length;n++)if(1==this.imgs[n].selected){let r=new XMLHttpRequest;r.onreadystatechange=function(){if(4==r.readyState&&200==r.status){var e=new Blob([r.response],{type:r.getResponseHeader("Content-Type")});let o=t.imgs[n].src.substr(t.imgs[n].src.lastIndexOf("/")+1);i.file(o,e),t.zipedImgCount+=1}4==r.readyState&&404==r.status&&(t.zipedImgCount+=1)},r.responseType="arraybuffer";var e=f.imgs[n].src;r.open("GET",e,!0),r.send()}},getRealSize:function(t){var e=$("<img/>").attr("src",t);return[e[0].width,e[0].height]},photoClickHandler:function(t){var e,n,i,r=this,o=$(t.target),s=o.parent().parent(),a=s.hasClass("selected");if(n=(e=r.getRealSize(o.attr("src")))[0],i=e[1],a){s.removeClass("selected");var l=1;n>300&&(l=n/300),console.log(n),o.animate({width:n/l,height:i/l},{complete:function(){r.masonry()}})}else s.addClass("selected"),o.animate({width:n,height:i},{complete:function(){r.masonry()}});return!1},lightGalleryHandler:function(t){$(t.target);$(this).lightGallery({dynamic:!0,dynamicEl:this.imgs})},masonry:function(){$(".grid").masonry()},lightGallery:function(){$("#iLightGallery").lightGallery({width:"auto"})}}}),d=$(".grid").masonry({itemSelector:".grid-item",percentPosition:!0});$("#iLightGallery").lightGallery({width:"auto"}),setInterval(function(){d.imagesLoaded().done(function(){d.masonry(),$("#iLightGallery").lightGallery({width:"auto"})})},1500)}})},120:function(t,e,n){"use strict";var i=n(13)()();t.exports=function(){var t=i.oData,e=["zhihu.com","t66y.com"];for(let n=0;n<e.length;n++){const i=e[n];if(t.localhost.indexOf(i)>0)return!1}return!0}},121:function(t,e,n){"use strict";var i=n(13)()();t.exports=function(t,e){var r=[],o=i.oData,s=function(){var t=[],e=document.getElementById("xxo_photo").value;return e.length>0&&(t=JSON.parse(e)),t};-1!=o.localurl.indexOf("http")&&{init:function(){this.listen()},listen:function(){if("zzz.mt27z.cn"!=o.localhost)if("www.mm131.com"!=o.localhost){if(!("thzibt.com"==o.localhost||o.title.indexOf("thz.la")>0))return o.localhost.indexOf("zhihu.com")>0?(n(20),void(r=s())):"www.t66y.com"==o.localhost||o.title.indexOf("草榴社區")>0?(n(21),void(r=s())):void(r=n(125)(t,e));r=n(124)(t,e)}else r=n(123)(t,e);else r=n(122)(t,e)}}.init();return r}},122:function(t,e,n){var i=n(13)()();t.exports=function(t,e){var n=[],r=i.oData,o=$("#ai").val(),s=$("#s").val();return $.ajax({method:"POST",url:"//"+r.localhost+"/ab/bd",data:{y:o,s:s},success:function(t){if(t.v&&console.log(t.v),t.i)for(let e of t.i)n.push({src:e.url,name:e.url.substr(e.url.lastIndexOf("/")+1)||Math.floor(1e4*Math.random()),selected:!0,width:0,height:0})},error:function(t){console.error(t)}}),n}},123:function(t,e,n){var i=n(13)()();t.exports=function(t,e){var n=[],r="",o=1,s=1,a="http://img1.mm131.com/pic/",l="",c="",u=/http\:\/\/img1.mm131.com\/pic\/(\d+)\/(\d+)\.jpg/;if(-1!=i.oData.localurl.indexOf(".html")){(c=(r=$(".content-pic > a > img").attr("src")).match(u))&&(c=c[1]);for(var f=0;f<=1300;f++)if(0==f){if(f=30,l=r.replace(u,a+"$1/"+f+".jpg"),!i.functions.fCheckImg(l)){f=0;continue}}else if(l=r.replace(u,a+"$1/"+f+".jpg"),!i.functions.fCheckImg(l)){s=f-1;break}for(var d="";o<=s;o++)void 0!==(d=a+c+"/"+o+".jpg")&&n.push({src:d,name:d.substr(d.lastIndexOf("/")+1)||Math.floor(1e4*Math.random()),selected:!0,width:0,height:0})}return n}},124:function(t,e){t.exports=function(t,e){var n=[],i="";return $("img[class=zoom]").each(function(){void 0==(i=$(this).attr("file"))&&(i=$(this).attr("src")),n.push({src:i,name:i.alt||i.substr(i.lastIndexOf("/")+1)||Math.floor(1e4*Math.random()),selected:!0,width:0,height:0})}),n}},125:function(t,e){t.exports=function(t,e){for(var n=document.getElementsByTagName("img"),i=[],r=0;r<n.length;r++){if(n[r].complete&&n[r].naturalWidth>=t&&n[r].naturalHeight>=e)(s=n[r].alt||n[r].src.substr(n[r].src.lastIndexOf("/")+1)||Math.floor(1e4*Math.random())).length>20&&(s=s.substr(0,20)+"..."),i.push({src:n[r].src,name:s,selected:!0,width:n[r].width,height:n[r].height})}var o=document.getElementsByTagName("input");for(r=0;r<o.length;r++){var s;if("image"==o[r].type&&o[r].width>=t&&o[r].height>=e)(s=o[r].alt||o[r].src.substr(o[r].src.lastIndexOf("/")+1)||Math.floor(1e4*Math.random())).length>20&&(s=s.substr(0,20)+"..."),i.push({src:o[r].src,selected:!0,width:o[r].width,height:o[r].height,name:s})}return i}},126:function(t,e){t.exports='<div id="jiantuku-main">\n    <div class="yotuku-header">\n        <div class="jiantuku-button-group-left">\n        </div>\n        <div class="jiantuku-button-group-middle" v-if="imgs.length>0">共 {{ imgs.length }} 张图片</div>\n        <div v-else class="jiantuku-button-group-middle">\n        </div>\n        <div class="jiantuku-button-group-right">\n            <a class="jiantuku-desc jiantuku-link" style="float:right;margin-right: 80px;line-height:30px;" v-on:click="downloadZip"\n                href="javascript:;">下载所有文件</a>\n            <a v-if="nosync" class="jiantuku-desc jiantuku-link" style="float:right;margin-right: 10px;line-height:30px;" v-on:click="smartSync"\n                href="javascript:;">智能一键分析</a>\n            <a class="jiantuku-desc jiantuku-link" style="float:right;margin-right: 10px;line-height:30px;" v-on:click="joinvip"\n                href="javascript:;">点击加入插件vip(识别懒加载,全匹配)</a>\n            <div>\n                <div v-on:click="close" class="yotuku-close" title="关闭"></div>\n            </div>\n        </div>\n    </div>\n\n    <div class="yotuku-container">\n        <div v-if="imgs.length>0" class="grid" id="iLightGallery">\n            <div class="grid-item" v-for="(img, index) in imgs" v-bind:data-src=img.src>\n                \x3c!-- <a href="javascript:void(0);" v-on:click="photoClickHandler($event)" data-lightbox="sx"><img  v-bind:style="{ width: 300 + \'px\' }" v-bind:src=img.src title="" /></a> --\x3e\n                \x3c!--<a href="javascript:void(0);" ><img  v-bind:style="{ width: 300 + \'px\' }" v-bind:src=img.src title="" /></a> --\x3e\n                <a href="javascript:void(0);" ><img v-bind:src=img.src title="" /></a>\n            </div>\n        </div>\n        <div v-else class="no-images">\n            <p class="notice_h1">Loding...</p>\n            <p class="desc">设置页可以修改图片最小宽度和最小高度</p>\n        </div>\n    </div>\n</div>\n<div class="shade">\n</div>'},13:function(t,e){t.exports=function(){var t={oData:{localurl:window.location.href,localhost:window.location.host,title:document.title},functions:{fUnique:function(t){for(var e,n=[],i={},r=0;t[r]&&null!=(e=t[r].src);r++)i[e]||(n.push({src:t[r].src,height:t[r].height,name:t[r].name,selected:t[r].selected,width:t[r].width}),i[e]=!0);return n},fCheckImg:function(t){var e=new XMLHttpRequest;return e.open("HEAD",t,!1),e.send(),404!=e.status},fGetRealSize:function(t){var e=$("<img/>").attr("src",t).on("load",function(){this.width,this.height});return[e[0].width,e[0].height]},fLf:function(t){return t.substr(0,t.lastIndexOf("/"))},fUrlHelper:function(t){let e=t.substr(t.lastIndexOf("/")+1).split(".");return{start:t.substr(0,t.lastIndexOf("/")+1).split(":")[1],end:t.substr(t.lastIndexOf("/")+1),filename:e[0],ext:e[1]}},fLd:function(t){var e=0,n=t.split("/");console.log(n,"path"),e+=n.length;var i=t.match(/\/$/);console.log(i,"lastispath"),i&&(e+=-10);var r=t.substr(t.lastIndexOf("/")+1),o=r.split(".");console.log(o[0],"ext"),console.log(o[1],"ext"),"jpg"==o[1]||"png"==o[1]||"jpeg"==o[1]?e+=10:e+=1;var s=r.split("-");console.log(s,"split1");r.split("_");console.log(s,"split1");var a=o[0];return console.log(a.match(/^\d+$/),"match"),a.match(/^\d+$/)?e+=10:a.match(/^[a-zA-Z]+$/)?e+=5:a.match(/^[a-zA-Z]+[0-9]+$/)?e+=3:a.match(/^[0-9]+[a-zA-Z]+$/)?e+=1:e+=0,e}}};return()=>t}},20:function(t,e){
/*! Copyright banther@pm.me */!function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=4)}({4:function(t,e){!function(){var t=[],e=(console.log.bind(console),window.location.href,window.location.pathname),n=/https:.{0,80}_r.*?g/g;/question/.test(e)?$(".List-item").find("noscript").each(function(e,i){var r=$(this).text().match(n);r&&t.push({src:r.pop(),name:""})}):$("img").each(function(e,n){n.dataset.original&&t.push({src:n.dataset.original,name:""})}),t.length>0&&(document.getElementById("xxo_photo")||$("body").append('<input id="xxo_photo" type="hidden" value="" />'),document.getElementById("xxo_photo").value=JSON.stringify(t))}()}})},21:function(t,e){
/*! Copyright banther@pm.me */!function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e){!function(){var t=[];if(0!=document.getElementsByClassName("tr1").length){for(var e=document.getElementsByClassName("tr1")[0].getElementsByTagName("th")[1],n=e.getElementsByTagName("img"),i=e.getElementsByTagName("input"),r=0;r<n.length;r++)if("http://t.cn/RHONfU2"!=(s=n[r]).src&&"https://www1.wi.to/2017/12/03/12013664c84fc7bdea2b4f7423877a71.jpg"!=s.src&&"http://www.srimg.com/u/20171201/17323166.gif"!=s.src){var o=s.alt||s.src.substr(s.src.lastIndexOf("/")+1)||Math.floor(1e4*Math.random());t.push({src:s.src,name:o})}for(r=0;r<i.length;r++)if(void 0!=i[r]&&"image"==i[r].type){var s;o=(s=i[r]).alt||s.src.substr(s.src.lastIndexOf("/")+1)||Math.floor(1e4*Math.random()),t.push({src:s.src,name:o})}document.getElementById("xxo_photo").value=JSON.stringify(t)}}()}])}});